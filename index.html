<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Leaflet Map (Sheets + Apps Script)</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"/>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    #map {
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫ */
    .btn {
      border: none;
      font-size: 16px;
      cursor: pointer;
      transition: background-color 0.3s;
      text-align: center;
      z-index: 1001;
    }
    .btn:hover {
      background-color: #0056b3;
    }

    /* –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è –≤–µ—Ä—Å–∏—è */
    @media screen and (min-width: 768px) {
      .control-buttons {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 1001;
      }
      .btn {
        padding: 15px 25px;
        background-color: #007BFF;
        color: white;
        border-radius: 8px;
        min-width: 150px;
      }
    }

    /* –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è */
    @media screen and (max-width: 767px) {
      .control-buttons {
        position: absolute;
        bottom: 5vh;
        left: 50%;
        transform: translateX(-50%);
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        width: 90vw;
        z-index: 1001;
      }
      .btn {
        width: 100px;
        height: 100px;
        font-size: 18px;
        background-color: #007BFF;
        color: white;
        border-radius: 12px;
      }
    }

    /* –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
    .bottom-panel {
      position: fixed;
      bottom: -100%;
      left: 50%;
      transform: translateX(-50%);
      width: 90vw;
      max-width: 500px;
      background-color: #fff;
      border-radius: 15px 15px 0 0;
      padding: 20px;
      box-shadow: 0 -2px 15px rgba(0, 0, 0, 0.3);
      transition: bottom 0.4s ease-in-out;
      z-index: 1002;
    }
    .bottom-panel.active {
      bottom: 10vh;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  
  <div class="control-buttons">
    <button class="btn" id="legendToggle">üìñ</button>
    <button class="btn" id="statusToggle">‚öôÔ∏è</button>
    <button class="btn" id="reklamaToggle">üí°</button>
    <button class="btn" id="searchToggle">üîç</button>
  </div>

  <div class="bottom-panel" id="bottomPanel"></div>

  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script>
    function isMobileDevice() {
      return window.matchMedia("(max-width: 767px)").matches;
    }
    
    const map = L.map('map', {
      zoomControl: false
    }).setView([51.09, 71.45], isMobileDevice() ? 13 : 11);
    
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19
    }).addTo(map);

    function togglePanel(content) {
      const panel = document.getElementById('bottomPanel');
      panel.innerHTML = content;
      panel.classList.toggle('active');
    }

    document.getElementById('legendToggle').addEventListener('click', () => {
      togglePanel('<p>–õ–µ–≥–µ–Ω–¥–∞: –°—Ç–∞—Ç—É—Å—ã, —Ä–µ–∫–ª–∞–º–∞ –∏ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è</p>');
    });
    document.getElementById('statusToggle').addEventListener('click', () => {
      togglePanel('<p>–§–∏–ª—å—Ç—Ä –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é</p>');
    });
    document.getElementById('reklamaToggle').addEventListener('click', () => {
      togglePanel('<p>–§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–∫–ª–∞–º–µ</p>');
    });
    document.getElementById('searchToggle').addEventListener('click', () => {
      togglePanel('<p>–ü–æ–∏—Å–∫ –ø–æ ID –¢–∞–±–ª–æ</p>');
    });
  </script>
</body>
</html>
